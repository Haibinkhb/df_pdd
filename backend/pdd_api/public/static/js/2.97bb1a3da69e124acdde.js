webpackJsonp([2,4],{"2J0V":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("Dd8w"),o=n.n(a),s=n("tZuA"),r=n("NYxO"),i={name:"Mine",components:{loginPanel:s.default},computed:o()({},Object(r.c)(["userInfo"])),methods:{quit:function(){this.$store.state.userInfo.usersId=""}}},c={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mine"},[e.userInfo.usersId?n("div",[e._m(0),e._v(" "),n("div",{staticClass:"quit_box"},[n("button",{staticClass:"quit_button",on:{click:function(t){e.quit()}}},[e._v("退出登陆")])])]):n("loginPanel")],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"toast"},[t("h5",[this._v("其他功能待完善")])])}]};var u=n("VU/8")(i,c,!1,function(e){n("Q0je")},null,null);t.default=u.exports},Q0je:function(e,t){},SBpw:function(e,t){},tZuA:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n("34+y");var a=n("X+yh"),o=n.n(a),s=n("Xxa5"),r=n.n(s),i=n("exGp"),c=n.n(i),u=(n("OgVB"),n("/Lyv")),l=n.n(u),d=n("Dd8w"),p=n.n(d),v=n("gyMJ"),f=n("NYxO"),h={data:function(){return{loginWay:!0,userName:"",password:"",identifyingCode:"",phone:"",phoneCode:"",count:0}},methods:p()({changeRouter:function(e){this.$router.replace(e)}},Object(f.c)(["userInfo"]),Object(f.b)(["syncUserInfo"]),{chooseLogin:function(){var e=this;this.loginWay=!this.loginWay,this.loginWay||l.a.confirm("强烈推荐您使用手机号码登录，用户名登陆当前存在严重问题...").then(function(t){"confirm"===t&&(e.loginWay=!e.loginWay)})},changeCaptcha:function(){this.$refs.captcha.src="http://139.155.126.152:3000/api/getCaptcha?time="+new Date},sendCode:function(){var e=this;return c()(r.a.mark(function t(){var n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.validatePhone){t.next=4;break}return t.abrupt("return");case 4:e.validatePhone&&(e.count=30,n=setInterval(function(){e.count--,0===e.count&&clearInterval(n)},1e3));case 5:return t.t0=parseInt,t.next=8,Object(v.h)(e.phone);case 8:t.t1=t.sent,e.phoneCode=(0,t.t0)(t.t1);case 10:case"end":return t.stop()}},t,e)}))()},login:function(){var e=this;return c()(r.a.mark(function t(){var n,a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.loginWay){t.next=39;break}if(e.phone){t.next=6;break}return o()({message:"请输入手机号码",position:"center",duration:3e3}),t.abrupt("return");case 6:if(e.validatePhone){t.next=11;break}return o()({message:"请输入正确的手机号码",position:"center",duration:3e3}),t.abrupt("return");case 11:if(e.phoneCode){t.next=16;break}return o()({message:"请输入验证码",position:"center",duration:3e3}),t.abrupt("return");case 16:if(/^\d{6}$/gi.test(e.phoneCode)){t.next=21;break}return o()({message:"请输入正确的验证码",position:"center",duration:3e3}),t.abrupt("return");case 21:return t.next=23,Object(v.k)(e.phone,e.phoneCode);case 23:if(1!==(n=t.sent).errorCode){t.next=28;break}o()({message:n.meessage,position:"center",duration:3e3}),t.next=37;break;case 28:if(200===n.successCode){t.next=32;break}o()({message:"登录失败",position:"center",duration:3e3}),t.next=37;break;case 32:return console.log(n),e.syncUserInfo(n),t.next=36,e.changeRouter("/mine");case 36:o()({message:"登录成功",position:"center",duration:3e3});case 37:t.next=71;break;case 39:if(e.userName){t.next=44;break}return o()({message:"请输入用户名",position:"center",duration:3e3}),t.abrupt("return");case 44:if(e.password){t.next=49;break}return o()({message:"请输入密码",position:"center",duration:3e3}),t.abrupt("return");case 49:if(e.identifyingCode){t.next=54;break}return o()({message:"请输入验证码",position:"center",duration:3e3}),t.abrupt("return");case 54:return t.next=56,Object(v.l)(e.userName,e.password,e.identifyingCode);case 56:if(1!==(a=t.sent).errorCode){t.next=62;break}o()({message:a.meessage,position:"center",duration:3e3}),e.changeCaptcha(),t.next=71;break;case 62:if(200===a.successCode){t.next=67;break}o()({message:"登录失败",position:"center",duration:3e3}),e.changeCaptcha(),t.next=71;break;case 67:return e.syncUserInfo(a),t.next=70,e.changeRouter("/mine");case 70:o()({message:"登录成功",position:"center",duration:3e3});case 71:case"end":return t.stop()}},t,e)}))()}}),computed:{validatePhone:function(){return/^[1][3,4,5,7,8,9][0-9]{9}$/.test(this.phone)}}},g={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"Panel"},[n("div",{staticClass:"chooseMode"},[n("div",{staticClass:"content"},[n("div",{staticClass:"contentTop"},[n("div",{class:{choose:e.loginWay},on:{click:function(t){e.chooseLogin()}}},[e._v("手机登录")]),e._v(" "),n("div",{class:{choose:!e.loginWay},on:{click:function(t){e.chooseLogin()}}},[e._v("用户名登录")])]),e._v(" "),n("form",{attrs:{action:""}},[e.loginWay?e.loginWay?n("div",{staticClass:"phone_login"},[n("label",{staticClass:"phone",attrs:{for:""}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.phone,expression:"phone"}],attrs:{type:"phone",placeholder:"手机号"},domProps:{value:e.phone},on:{input:function(t){t.target.composing||(e.phone=t.target.value)}}}),e._v(" "),e.count?n("button",{staticClass:"getCode",attrs:{disabled:"disabled"}},[e._v("已发送("+e._s(e.count)+"s)")]):n("button",{staticClass:"getCode",class:{phoneRight:e.validatePhone},on:{click:function(t){return t.preventDefault(),e.sendCode(t)}}},[e._v("获取验证码")])]),e._v(" "),n("label",{attrs:{for:""}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.phoneCode,expression:"phoneCode"}],staticClass:"phoneCode",attrs:{type:"tel",placeholder:"验证码"},domProps:{value:e.phoneCode},on:{input:function(t){t.target.composing||(e.phoneCode=t.target.value)}}})])]):e._e():n("div",{staticClass:"userName"},[n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.userName,expression:"userName"}],attrs:{type:"text",placeholder:"用户名"},domProps:{value:e.userName},on:{input:function(t){t.target.composing||(e.userName=t.target.value)}}})]),e._v(" "),n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",placeholder:"密码"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),e._v(" "),n("label",{staticClass:"verification"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.identifyingCode,expression:"identifyingCode"}],attrs:{type:"text",placeholder:"验证码"},domProps:{value:e.identifyingCode},on:{input:function(t){t.target.composing||(e.identifyingCode=t.target.value)}}}),e._v(" "),n("img",{ref:"captcha",staticClass:"verificationImg",attrs:{src:"http://139.155.126.152:3000/api/getCaptcha"},on:{click:function(t){e.changeCaptcha()}}})])]),e._v(" "),n("div",{staticClass:"loginButton"},[n("button",{staticClass:"login_button",on:{click:function(t){return t.preventDefault(),e.login(t)}}},[e._v("登录")]),e._v(" "),n("button",{staticClass:"back_button",on:{click:function(t){t.preventDefault(),e.$router.back("/login")}}},[e._v("返回")])])])])])])},staticRenderFns:[]};var m=n("VU/8")(h,g,!1,function(e){n("SBpw")},null,null);t.default=m.exports}});